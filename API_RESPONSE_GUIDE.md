# LangGraph Cloud API Response Guide

## üì¶ What the Agent Returns

When you invoke the travel agent on LangGraph Cloud, you get back the **complete state** after all nodes have executed.

## üîç Full Response Structure

```json
{
  "messages": [
    {
      "role": "human",
      "content": "Travel Details Received:\n- Source: Seattle, USA\n- Destination: Tokyo, Japan\n..."
    },
    {
      "role": "human",
      "content": "[Complete travel plan text]"
    }
  ],
  "user_id": "user@example.com",
  "source": "Seattle, USA",
  "destination": "Tokyo, Japan",
  "start_date": "2024-06-15",
  "end_date": "2024-06-22",
  "preferences": "Mid-range budget, local culture",
  "hobbies": "Photography, food, temples",
  "saved_preferences": "Previous Travel Preferences Found:\n- Preferred Travel Style: budget-friendly\n- Interests/Hobbies: photography\n- Past Destinations: ['Miami', 'Paris']",
  "destination_info": "[Detailed research about Tokyo - weather, culture, attractions, transportation, etc.]",
  "itinerary": "[Day-by-day itinerary from June 15-22]",
  "accommodations": "[3-5 hotel/accommodation recommendations with pros/cons]",
  "activities": "[Specific photography spots, food tours, temple visits based on hobbies]",
  "final_plan": "[Complete formatted travel guide combining all above information]"
}
```

## üéØ Key Fields Explained

### Input Fields (What You Send)
| Field | Description | Example |
|-------|-------------|---------|
| `user_id` | Unique user identifier | `"user@example.com"` |
| `source` | Starting location | `"Seattle, USA"` |
| `destination` | Destination | `"Tokyo, Japan"` |
| `start_date` | Trip start (YYYY-MM-DD) | `"2024-06-15"` |
| `end_date` | Trip end (YYYY-MM-DD) | `"2024-06-22"` |
| `preferences` | Travel style | `"Mid-range budget, local culture"` |
| `hobbies` | User interests | `"Photography, food, temples"` |

### Output Fields (What You Get Back)

#### 1. **`saved_preferences`** (String)
Loaded by `load_user_preferences_node` at the start.

```
Previous Travel Preferences Found:
- Preferred Travel Style: budget-friendly, family-friendly
- Interests/Hobbies: photography, hiking, food
- Past Destinations: ['Miami', 'New York', 'Paris']
```

**Empty string** if user is new.

#### 2. **`destination_info`** (String)
Generated by `research_destination_node`.

```
# Tokyo, Japan - Travel Research

## Overview
Tokyo, the capital of Japan, is a vibrant metropolis blending traditional
culture with cutting-edge technology...

## Best Time to Visit
June is the rainy season (tsuyu), but temperatures are pleasant...

## Top Attractions
- Senso-ji Temple (oldest temple in Tokyo)
- Meiji Shrine (peaceful forest shrine)
...

## Transportation
- Tokyo Metro and JR lines cover the city extensively
- Get a Suica or Pasmo card for easy payment
...

## Safety Considerations
Tokyo is one of the safest cities in the world...
```

Length: ~800-1500 words

#### 3. **`itinerary`** (String)
Generated by `plan_itinerary_node`.

```
# 8-Day Tokyo Itinerary (June 15-22, 2024)

## Day 1 - June 15 (Arrival Day)
- Morning: Arrive at Narita Airport, take Narita Express to Tokyo
- Afternoon: Check into hotel, explore Shibuya neighborhood
- Evening: Shibuya Crossing photo opportunity, dinner at local izakaya
- Recommended: Rest early to adjust to time zone

## Day 2 - June 16 (Traditional Tokyo)
- 9:00 AM: Visit Senso-ji Temple in Asakusa (great for photography)
- 11:00 AM: Explore Nakamise Shopping Street
- 1:00 PM: Lunch at traditional ramen shop
- 3:00 PM: Visit Ueno Park and museums
- 6:00 PM: Dinner in Ueno area
...

## Day 8 - June 22 (Departure)
- Morning: Last-minute shopping in Tokyo Station
- Departure: Head to airport
```

Length: ~1000-2000 words

#### 4. **`accommodations`** (String)
Generated by `suggest_accommodations_node`.

```
# Accommodation Recommendations for Tokyo

## 1. Hotel Gracery Shinjuku ‚≠ê‚≠ê‚≠ê
**Location:** Shinjuku (Central Tokyo)
**Price Range:** $120-180/night
**Pros:**
- Central location near JR Shinjuku Station
- Rooftop terrace with Godzilla head
- Great for photographers (neon lights at night)
**Cons:**
- Can be noisy due to central location
- Rooms are compact (typical for Tokyo)

## 2. Richmond Hotel Premier Asakusa International
**Location:** Asakusa (Near Senso-ji Temple)
**Price Range:** $100-150/night
**Pros:**
- Walking distance to Senso-ji Temple
- Traditional neighborhood feel
- Rooftop views of Tokyo Skytree
**Cons:**
- Further from nightlife areas
- Limited English at check-in

[3-5 total recommendations]
```

Length: ~600-1000 words

#### 5. **`activities`** (String)
Generated by `recommend_activities_node`.

```
# Recommended Activities for Tokyo

Based on your interests in photography, food, and temples:

## Photography Experiences

### 1. TeamLab Borderless (Digital Art Museum)
**Why:** Stunning interactive digital art installations, amazing for photography
**Cost:** ¬•3,200 (~$24)
**Booking:** Reserve online 2-3 weeks in advance (very popular)
**Best Time:** Weekday mornings for fewer crowds
**Photography Tips:** Bring wide-angle lens, no flash allowed

### 2. Golden Hour at Tokyo Tower
**Why:** Classic Tokyo skyline shots
**Cost:** ¬•1,200 (~$9) main deck
**Best Time:** 1 hour before sunset (around 6:30 PM in June)

## Food Experiences

### 1. Tsukiji Outer Market Food Tour
**Why:** Fresh sushi, street food, local specialties
**Duration:** 2-3 hours
**Cost:** ¬•5,000-8,000 (~$38-60) for guided tour
**Best Time:** Early morning (7-9 AM)

### 2. Cooking Class in Shibuya
**Experience:** Learn to make sushi and tempura
**Cost:** ¬•8,000 (~$60)
**Booking:** cookinjapan.com

## Temple & Cultural Experiences
[More recommendations]
```

Length: ~800-1200 words

#### 6. **`final_plan`** (String) ‚≠ê MOST IMPORTANT
Generated by `compile_final_plan_node`. **This is typically what you want to display to users.**

```
# Complete Travel Guide: Tokyo, Japan
## June 15-22, 2024

---

## üìã Trip Overview

**Traveler:** Mid-range budget, interested in photography, food, and temples
**Duration:** 8 days, 7 nights
**Starting From:** Seattle, USA
**Budget Level:** Mid-range ($150-250/day excluding flights)

---

## üè® Recommended Accommodation

**Primary Recommendation:** Hotel Gracery Shinjuku
- **Location:** Shinjuku (Central Tokyo)
- **Price:** ~$150/night
- **Why:** Perfect base for photographers, central location, easy access to all areas

**Alternative:** Richmond Hotel Premier Asakusa International (Traditional area)

---

## üìÖ Day-by-Day Itinerary

[Complete itinerary with all 8 days]

---

## üéØ Must-Do Activities

[Top 5-10 activities based on your interests]

---

## üçú Food Recommendations

**Breakfast Spots:**
- Tsukiji Outer Market
- Convenience stores (surprisingly good!)

**Lunch Options:**
- Ramen shops (¬•800-1,200)
- Conveyor belt sushi

**Dinner Experiences:**
- Izakaya hopping in Shinjuku
- Kaiseki dinner (traditional multi-course)

---

## üöá Transportation Guide

**Getting Around:**
- Get Suica/Pasmo card (¬•2,000 deposit + credit)
- Download Google Maps and Hyperdia app
- JR Pass not recommended for Tokyo-only trip

**From Airport:**
- Narita Express to Tokyo Station (¬•3,070, 60 min)
- Skyliner to Ueno (¬•2,520, 45 min)

---

## üí° Pro Tips

1. **Photography:** Best light is early morning (6-8 AM) and golden hour
2. **Food:** Don't tip - it's considered rude in Japan
3. **Temples:** Dress modestly, bow at entrance
4. **Weather:** June is rainy - bring compact umbrella
5. **Cash:** Many places still cash-only, have ¬•20,000+ on hand

---

## üì± Essential Apps

- Google Maps (navigation)
- Google Translate (camera translation)
- Hyperdia (train schedules)
- Tabelog (restaurant reviews in Japanese)

---

## üéí Packing Checklist

- Camera + extra batteries
- Comfortable walking shoes (you'll walk 15,000+ steps/day)
- Light rain jacket
- Portable charger
- Universal adapter (Type A plugs)

---

## üí∞ Estimated Budget Breakdown

**Daily Costs:**
- Accommodation: $150
- Food: $50-80
- Activities: $30-50
- Transportation: $20
**Total:** ~$1,800-2,200 for 8 days (excluding flights)

---

## üÜò Emergency Information

- **Emergency Number:** 110 (police), 119 (ambulance)
- **US Embassy Tokyo:** +81-3-3224-5000
- **Tourist Helpline:** 050-3816-2787 (24/7, English)

---

Have an amazing trip to Tokyo! üáØüáµ‚úàÔ∏è
```

Length: ~3000-5000 words (complete guide)

#### 7. **`messages`** (List)
Conversation history showing intermediate steps.

```json
[
  {
    "role": "human",
    "content": "Travel Details Received:\n- Source: Seattle, USA..."
  },
  {
    "role": "human",
    "content": "[Final plan text - same as final_plan field]"
  }
]
```

---

## üí° What Should You Display to Users?

### Option 1: Show Only `final_plan` (Recommended)
```python
result = await client.runs.join(thread_id, run_id)
print(result["final_plan"])  # Complete travel guide
```

### Option 2: Show All Sections Separately
```python
result = await client.runs.join(thread_id, run_id)

print("## DESTINATION RESEARCH")
print(result["destination_info"])

print("\n## ITINERARY")
print(result["itinerary"])

print("\n## ACCOMMODATIONS")
print(result["accommodations"])

print("\n## ACTIVITIES")
print(result["activities"])
```

### Option 3: Check for Saved Preferences
```python
result = await client.runs.join(thread_id, run_id)

if result["saved_preferences"]:
    print("Welcome back! Using your saved preferences:")
    print(result["saved_preferences"])

print(result["final_plan"])
```

---

## üîÑ Complete API Flow Example

### Python Client

```python
from langgraph_sdk import get_client
import asyncio

async def plan_trip():
    client = get_client(url="https://your-deployment.langchain.app")

    # Create thread
    thread = await client.threads.create()

    # Input
    input_data = {
        "user_id": "alice@example.com",
        "source": "Seattle, USA",
        "destination": "Tokyo, Japan",
        "start_date": "2024-06-15",
        "end_date": "2024-06-22",
        "preferences": "Mid-range budget, local culture",
        "hobbies": "Photography, food, temples",
        "saved_preferences": "",
        "messages": [],
        "destination_info": "",
        "itinerary": "",
        "accommodations": "",
        "activities": "",
        "final_plan": ""
    }

    # Config with user_id
    config = {
        "configurable": {
            "thread_id": thread["thread_id"],
            "user_id": "alice@example.com"
        }
    }

    # Run
    run = await client.runs.create(
        thread_id=thread["thread_id"],
        assistant_id="travel_agent",
        input=input_data,
        config=config
    )

    # Wait for completion
    result = await client.runs.join(
        thread_id=thread["thread_id"],
        run_id=run["run_id"]
    )

    # ‚úÖ Display results
    print("=" * 60)
    print("YOUR TRAVEL PLAN")
    print("=" * 60)
    print(result["final_plan"])  # This is what users want!

    # Optional: Check if preferences were loaded
    if result["saved_preferences"]:
        print("\n[Used saved preferences from previous trips]")

asyncio.run(plan_trip())
```

---

## üìä Response Size Estimates

| Field | Typical Size | Description |
|-------|-------------|-------------|
| `destination_info` | 800-1500 words | Research & overview |
| `itinerary` | 1000-2000 words | Day-by-day schedule |
| `accommodations` | 600-1000 words | 3-5 hotel recommendations |
| `activities` | 800-1200 words | Specific experiences |
| **`final_plan`** | **3000-5000 words** | **Complete guide (use this!)** |
| `saved_preferences` | 100-200 chars | Previous user data |

**Total response size:** ~8-12 KB (highly compressible text)

---

## üéØ Key Takeaways

1. **Use `final_plan`** - It's the polished, complete travel guide
2. **All intermediate fields are preserved** - You can access them if needed
3. **`saved_preferences` shows returning user data** - Great for personalization
4. **Response is JSON** - Easy to parse and display in any format
5. **Everything is in the state** - No streaming needed, full result returned

---

## üöÄ Next Steps

See [DEPLOYMENT.md](DEPLOYMENT.md) for full API examples and [DEPLOYMENT_CHECKLIST.md](DEPLOYMENT_CHECKLIST.md) for deployment steps.
